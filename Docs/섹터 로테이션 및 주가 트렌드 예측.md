# Project: 2025 AI 기반 섹터 로테이션 & 가치주 발굴 시스템

### 1. 프로젝트 정의

> **"현재 시장을 주도하는 섹터를 실시간으로 식별하고, 머신러닝을 통해 해당 섹터 내에서 리스크 대비 상승 여력이 높은 '숨겨진 저평가 종목'을 발굴하는 자동화 분석 시스템"**

### 기획 의도 및 타겟

- **타겟 :** 증권사 리서치 센터 주니어 애널리스트 및 스마트 개인 투자자.
- **니즈 :** 시장의 소음을 제거하고, 데이터에 기반한 **'옥석 가리기'** 자동화.
- **핵심 가치:**
  1. **Top-Down 접근:** 숲(주도 섹터)을 먼저 보고 나무(개별 종목)를 고르는 정석 투자 전략 구현.
  2. **데이터 무결성:** 데이터 누수및 논리적 오류가 완벽히 제거된 고품질 금융 데이터 구축.
  3. **Actionable Insight:** 단순 현황판이 아닌, "오늘 무엇을 사야 하는가?"에 대한 구체적 리스트(Top 5) 제공.

---

## 2. 데이터 아키텍처

### 데이터 개요

- **Core Data:** 2018 ~ 2023년 대규모 주식 데이터 (약 60만 행, Yahoo Finance 기반).
- **Live Extension:** `yfinance` API 파이프라인을 통해 **2024 ~ 2025년 최신 데이터 실시간 연동** .
- **Coverage:** S&P 500 등 주요 우량 기업 500개 사 + 섹터 메타데이터.

---

## 3. 데이터 품질 엔지니어링

**스크립트:** `03_Data_Update.ipynb`

금융 데이터 분석의 신뢰도를 결정짓는 **4가지 치명적 결함을 발견하고 해결**

| **구분**           | **문제점**                                          | **해결 솔루션**                                        |
| ------------------ | --------------------------------------------------- | ------------------------------------------------------ |
| **1. 논리 오류**   | 고가(High) < 저가(Low) 등 논리적 모순 데이터 (30건) | `clean_ohlc_violations()` 함수로 논리에 맞게 값 보정   |
| **2. 데이터 누수** | A기업 종가가 B기업 수익률 계산에 반영되는 오류      | `groupby('Company')` 적용으로 기업별 독립 연산 수행    |
| **3. 정밀도 이슈** | 부동소수점 오차로 인한 데이터 오검출 (FERG 등)      | `validate_ohlc_with_tolerance()` (허용 오차 0.01) 도입 |
| **4. 극단값 관리** | 50% 이상 폭락/폭등 등 실제 블랙스완 이벤트          | 삭제하지 않고 `Is_Extreme_Change` 플래그 생성하여 보존 |

---

## 4. 분석 로직: 탑다운(Top-Down) 3단계 프로세스

이 프로젝트는 **"Where to Play(어디서) → Who is Best(무엇을)"** 의 흐름을 따릅니다.

### Step 1. 주도 섹터 식별 (Where?)

- **방법:** 실시간 수급(Volume)과 모멘텀 분석, **Prophet 시계열 예측** .
- **목표:** 현재 시장 자금이 쏠리는 '주도 섹터' 선정.

### Step 2. 종목 군집화

- **방법:** **K-Means Clustering** 알고리즘 적용.
- **목표:** 섹터 내 종목들을 성격별로 분류 (예: 고성장 공격형 vs 안정형 vs 소외주).

### Step 3. 옥석 가리기

- **방법:** **Risk-Reward 산점도** 분석.
- **목표:** 주도 섹터 내에서 '변동성(Risk)은 낮고 기대수익(Reward)은 높은'**저평가 Top 5 종목 추출** .

---

## 5. 대시보드 및 활용 계획

- **Page 1 (Market Flow):** 섹터 로테이션 히트맵 & 랭킹 차트 (현재 시장의 흐름 파악).
- **Page 2 (Screening - Main):** Risk-Reward 스캐터 플롯 & 클러스터링 결과 (저평가 종목 발굴).
- **Page 3 (Deep Dive):** 개별 종목의 Prophet 예측 차트 및 매수 근거 상세 분석.

---
